/* Industrial Design System */

/* Large MTH display */
.mth-display {
  font-family: 'Roboto Mono', monospace;
  @apply text-4xl font-bold tracking-tight;
}

/* LED indicator styles */
.led-indicator { 
  @apply w-3 h-3 rounded-full; 
  box-shadow: 0 0 8px currentColor; 
}
.led-green { 
  @apply bg-success; 
  box-shadow: 0 0 12px hsl(var(--success)); 
}
.led-orange { 
  @apply bg-warning; 
  box-shadow: 0 0 12px hsl(var(--warning)); 
}
.led-red { 
  @apply bg-destructive; 
  box-shadow: 0 0 12px hsl(var(--destructive)); 
}
.led-blue { 
  @apply bg-info; 
  box-shadow: 0 0 12px hsl(var(--info)); 
}

/* Steel frame effect */
.steel-frame {
  @apply border border-steel rounded-xl;
  background: linear-gradient(135deg, hsl(var(--card)) 0%, hsl(220 25% 8%) 100%);
  box-shadow: inset 0 1px 0 hsl(var(--steel-light) / 0.2), 0 4px 12px hsl(0 0% 0% / 0.4);
}

.dashboard-widget { 
  @apply steel-frame p-4; 
  border-left: 3px solid hsl(var(--primary)); 
}

/* Industrial button */
.btn-industrial {
  @apply font-semibold uppercase tracking-wider min-h-[44px];
  background: linear-gradient(180deg, hsl(var(--steel)) 0%, hsl(var(--steel-dark)) 100%);
  box-shadow: inset 0 1px 0 hsl(var(--steel-light) / 0.5), 0 2px 4px hsl(0 0% 0% / 0.3);
}
.btn-industrial:hover { 
  background: linear-gradient(180deg, hsl(var(--steel-light)) 0%, hsl(var(--steel)) 100%); 
}
.btn-industrial:active { 
  box-shadow: inset 0 2px 4px hsl(0 0% 0% / 0.3); 
  transform: scale(0.98);
}

/* Touch targets - iOS optimized (minimum 44x44px) */
.touch-target { 
  @apply min-h-[44px] min-w-[44px]; 
}
.touch-target-sm { 
  @apply min-h-[40px] min-w-[40px]; 
}
.touch-target-lg { 
  @apply min-h-[56px] min-w-[56px]; 
}

/* Status bar */
.status-bar {
  @apply flex items-center gap-2 px-3 py-2 rounded-full text-sm font-medium min-h-[36px];
  background: hsl(var(--steel-dark) / 0.8);
  border: 1px solid hsl(var(--border));
}

/* Critical alert pulse */
@keyframes critical-pulse { 
  0%, 100% { opacity: 1; } 
  50% { opacity: 0.5; } 
}
.critical-alert { 
  animation: critical-pulse 1s ease-in-out infinite; 
}

/* Shimmer loading effect */
@keyframes shimmer { 
  0% { background-position: -200% 0; } 
  100% { background-position: 200% 0; } 
}
.shimmer {
  background: linear-gradient(90deg, hsl(var(--muted)) 25%, hsl(var(--steel) / 0.3) 50%, hsl(var(--muted)) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
  @apply rounded-xl;
}

/* Card hover glow effect */
.card-hover-glow { 
  transition: box-shadow 0.3s ease, border-color 0.3s ease, transform 0.2s ease; 
}
.card-hover-glow:hover {
  box-shadow: 0 0 20px hsl(var(--primary) / 0.15), 0 4px 12px hsl(0 0% 0% / 0.3);
  border-color: hsl(var(--primary) / 0.3);
  transform: translateY(-1px);
}

/* Offline indicator */
.offline-indicator {
  @apply fixed top-0 left-0 right-0 z-50 py-2 text-center text-sm font-medium;
  background: hsl(var(--warning)); 
  color: hsl(var(--warning-foreground));
}

/* Navigation active state */
.nav-item-active { 
  @apply text-primary; 
  border-bottom: 2px solid hsl(var(--primary)); 
}

/* Leaflet popup customization */
.leaflet-popup-content-wrapper {
  background: hsl(var(--card)) !important;
  color: hsl(var(--card-foreground)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 0.75rem !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5) !important;
}
.leaflet-popup-tip { 
  background: hsl(var(--card)) !important; 
  border: 1px solid hsl(var(--border)) !important; 
}
.leaflet-popup-close-button { 
  color: hsl(var(--muted-foreground)) !important; 
  font-size: 20px !important; 
  padding: 8px !important;
  min-width: 44px !important;
  min-height: 44px !important;
}
.leaflet-popup-close-button:hover { 
  color: hsl(var(--foreground)) !important; 
}

/* Custom markers */
.custom-area-marker, .custom-stop-marker, .custom-cluster-marker {
  background: none !important;
  border: none !important;
  touch-action: manipulation;
}

/* Section heading style */
.section-heading { 
  @apply flex items-center gap-2 text-sm font-semibold uppercase tracking-wider text-muted-foreground; 
}

/* Form section card */
.form-section { 
  @apply steel-frame p-4 space-y-4; 
}
.form-section-title { 
  @apply flex items-center gap-2 text-sm font-semibold uppercase tracking-wider text-muted-foreground pb-3 border-b border-border; 
}

/* Sticky submit bar for mobile */
.sticky-submit {
  @apply sticky bottom-20 z-30 border-t border-border p-4 -mx-4;
  background: hsl(var(--card) / 0.95);
  -webkit-backdrop-filter: blur(12px);
  backdrop-filter: blur(12px);
}

/* ── iOS Safari & cross-browser fixes ── */

/* Scrollbar styling (with webkit prefix for Safari) */
::-webkit-scrollbar { 
  width: 8px; 
  height: 8px; 
}
::-webkit-scrollbar-track { 
  background: transparent; 
}
::-webkit-scrollbar-thumb { 
  background: hsl(var(--steel) / 0.5); 
  border-radius: 4px; 
}
::-webkit-scrollbar-thumb:hover { 
  background: hsl(var(--steel-light)); 
}

/* Firefox scrollbar */
* { 
  scrollbar-width: thin; 
  scrollbar-color: hsl(var(--steel) / 0.5) transparent; 
}

/* Safe area for bottom navigation on notched devices */
.safe-area-pb { 
  padding-bottom: max(env(safe-area-inset-bottom), 8px); 
}

/* Touch optimization — eliminate 300ms delay */
html { 
  touch-action: manipulation; 
  -webkit-tap-highlight-color: transparent; 
}
button, a[href], [role="button"], input, select, textarea, label { 
  touch-action: manipulation; 
}

/* Minimum touch targets for all interactive elements */
button, [role="button"] { 
  min-height: 44px; 
}
a[href]:not(.inline-link) { 
  min-height: 44px; 
  display: inline-flex; 
  align-items: center; 
}

/* iOS date input fix */
input[type="date"],
input[type="datetime-local"],
input[type="time"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

/* iOS input zoom prevention (font-size >= 16px) */
@supports (-webkit-touch-callout: none) {
  input, select, textarea {
    font-size: max(16px, 1em) !important;
  }
}

/* Position sticky fix for Safari */
.sticky-submit {
  position: -webkit-sticky;
  position: sticky;
}

/* High contrast mode for outdoor use */
.high-contrast { 
  --foreground: 0 0% 100%; 
  --background: 0 0% 0%; 
  --muted-foreground: 0 0% 85%; 
}

/* Sun-Glare mode - maximální kontrast pro venkovní použití */
.sun-glare {
  --background: 0 0% 0%; 
  --foreground: 0 0% 100%;
  --card: 0 0% 5%; 
  --card-foreground: 0 0% 100%;
  --popover: 0 0% 5%; 
  --popover-foreground: 0 0% 100%;
  --primary: 145 100% 55%; 
  --primary-foreground: 0 0% 0%;
  --secondary: 0 0% 10%; 
  --secondary-foreground: 0 0% 100%;
  --muted: 0 0% 8%; 
  --muted-foreground: 0 0% 75%;
  --accent: 0 0% 15%; 
  --accent-foreground: 0 0% 100%;
  --border: 0 0% 30%; 
  --input: 0 0% 10%; 
  --ring: 145 100% 55%;
  --success: 145 100% 60%; 
  --warning: 40 100% 60%; 
  --destructive: 0 100% 60%;
  --steel: 0 0% 25%; 
  --steel-light: 0 0% 40%; 
  --steel-dark: 0 0% 8%;
}
.sun-glare * { 
  text-shadow: none !important; 
  font-weight: 600; 
}
.sun-glare .font-mono { 
  font-weight: 700; 
}
